(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1153:function(e,t,a){},1165:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(13),l=a(14),r=a(16),s=a(15),o=a(17),d=a(3),u=a(115),m=a(1139),f=a(1146),h=a(168),b=a(90),g=a(1144),v=a(533),E=a(334),p=a(1133),C=a(55),k=a(522),w=a(48),j=a(9),y=a(53),O=[{title:"Codigo",dataIndex:"cod",key:"cod",render:function(e){return e}},{title:"Descri\xe7\xe3o",dataIndex:"desc",key:"desc"}],S="dashboards",x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this))).fetchLeftList=function(){j.a.get("".concat(S,"/"),{}).then(function(e){a.setState({data:e.data})}).catch(function(e){console.log("error",e)})},a.state={data:[]},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchLeftList()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(y.a,{columns:O,data:this.state.data,onRowClick:function(t,a){return{onClick:function(n){return e.props.onClickRow(t,a)}}}}))}}]),t}(n.Component),N=(a(1153),a(242)),L=u.a.Option,q="Dashboards",M=function(e){function t(){var e;Object(c.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).getMaquinas=function(){j.a.get("MachineLabor",{}).then(function(t){var a;a=t.data;var n=N.filter(a,function(e){return"maquina"===e.type||"montagem"});e.setState({listofMaquinas:n})}).catch(function(e){console.log(e)})},e.onHandleClickNew=function(){e.setStateNew()},e.handleOnClickRow1=function(t,a){var n=Object(d.a)(Object(d.a)(e));e.setState({loading:!0,loadingTip:"Carregando registro, aguarde..."}),setTimeout(function(){j.a.get("".concat(q,"/").concat(t.id),{}).then(function(e){m.a.success("Dashboard carregada com sucesso!"),n.setStateEdit(e.data)}).catch(function(e){m.a.error("Erro ao buscar registro, tente novamente mais tarde!"),n.setStateNew()})},1e3)},e.onHandleClickSave=function(){var t=e.state.user,a=Object(d.a)(Object(d.a)(e)),n=e.state.tableList;e.setState({loading:!0,loadingTip:"Salvando registro, aguarde..."});var i="PATCH",c="".concat(q,"/").concat(t.id);a.state.isNew&&(i="POST",c="".concat(q));var l=t.cod,r=t.desc;Object(j.a)({method:i,url:c,data:{cod:l,desc:r,listofMaquinas:n}}).then(function(e){m.a.success("Dashboard salvo com sucesso!"),a.setStateEdit(e.data),a.leftListChild.current.fetchLeftList()}).catch(function(e){a.setStateEdit(t),m.a.error("Erro ao gravar registro, tente novamente mais tarde!")})},e.onCancel=function(){w.a.replace("/dashboard"),document.location.reload(!0)},e.onHandleClickDelete=function(){var t=e.state.user,a=Object(d.a)(Object(d.a)(e));f.a.confirm({title:"Tem certeza que deseja excluir esse registro?",onOk:function(){a.setState({loading:!0,loadingTip:"Excluindo registro, aguarde..."}),setTimeout(function(){var e="".concat(q,"/").concat(t.id);Object(j.a)({method:"DELETE",url:e}).then(function(e){m.a.success("Registro excluido com sucesso!"),a.setStateNew(),a.leftListChild.current.fetchLeftList()}).catch(function(e){m.a.error("Erro ao excluir registro, tente novamente mais tarde!")})},1e3),a.setStateNew()},onCancel:function(){}})},e.setStateNew=function(){e.setState({canSave:!0,canNew:!0,canDelete:!1,user:{},loading:!1,isNew:!0,tableList:[],jsonMaquinaAdd:{id:""}})},e.setStateEdit=function(t){e.setState({canSave:!0,canNew:!0,canDelete:!0,user:t,loading:!1,isNew:!1,tableList:t.machines,jsonMaquinaAdd:{id:""}})},e.handleChange=function(t){var a=e.state.user;a[t.target.name]=t.target.value,e.setState(function(){return{user:a}})},e.LeftList=function(){return i.a.createElement(x,{onClickRow:e.handleOnClickRow1,ref:e.leftListChild})},e.handleMaquina=function(t){var a=e.state.listofMaquinas,n={},i=!0,c=!1,l=void 0;try{for(var r,s=a[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var o=r.value;t===o.id&&(n=o)}}catch(d){c=!0,l=d}finally{try{i||null==s.return||s.return()}finally{if(c)throw l}}e.setState({jsonMaquinaAdd:n})},e.handleAdd=function(){var t=e.state.tableList,a=e.state.jsonMaquinaAdd,n=t[t.length-1],i=a;0===t.length?i.key=0:i.key=n.key+1,t.push(i),e.setState({tableList:t}),m.a.success("Maquina adicionada !")},e.Content=function(t){return i.a.createElement("div",{className:"main"},i.a.createElement(h.a,null,i.a.createElement(b.a,{span:24},i.a.createElement(g.a,{layout:"horizontal",size:"small"},i.a.createElement(v.a,{type:"inner",title:"Cadastro de Dashboards"},i.a.createElement(h.a,null,i.a.createElement(b.a,{lg:6,md:8,sm:12,xs:24},i.a.createElement("div",{className:"gx-form-row0"},i.a.createElement(g.a.Item,{label:"C\xf3digo"},i.a.createElement(E.a,{type:"text",value:t.cod,name:"cod",disabled:!e.state.isNew,onChange:e.handleChange})))),i.a.createElement(b.a,{lg:6,md:8,sm:12,xs:24},i.a.createElement("div",{className:"gx-form-row0"},i.a.createElement(g.a.Item,{label:"Descri\xe7\xe3o"},i.a.createElement(E.a,{type:"text",value:t.desc,name:"desc",onChange:e.handleChange})))))),i.a.createElement(v.a,{type:"inner",title:"Maquinas"},i.a.createElement(p.a,{className:"gx-table-responsive",dataSource:e.state.tableList,size:"small",rowKey:"id",style:{margin:"-15px -24px"},columns:e.columns})),i.a.createElement(v.a,{type:"inner",title:"Adicionar Maquinas"},i.a.createElement(h.a,null,i.a.createElement(b.a,{lg:6,md:6,sm:12,xs:24},i.a.createElement("div",{className:"gx-form-row0"},i.a.createElement(g.a.Item,{label:"Maquinas"},i.a.createElement(u.a,{style:{width:400},showSearch:!0,value:e.state.jsonMaquinaAdd.id,onChange:e.handleMaquina,filterOption:function(e,t){return-1!==t.props.children[0].concat(t.props.children[1],t.props.children[2]).toUpperCase().indexOf(e.toUpperCase())}},e.state.listofMaquinas.map(function(e){return i.a.createElement(L,{value:e.id},e.cod,"-",e.name)})))))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(h.a,null,i.a.createElement(b.a,{lg:6,md:6,sm:12,xs:24},i.a.createElement("div",{className:"gx-form-row0"},i.a.createElement(C.a,{type:"primary",htmlType:"submit",disabled:!1,onClick:e.handleAdd},"Adicionar Maquina")))))))))},e.state={isNew:!0,loader:!0,user:{},canNew:!0,canSave:!0,canDelete:!1,loading:!1,listofMaquinas:[],tableList:[],jsonMaquinaAdd:{id:""}};var a=Object(d.a)(Object(d.a)(e));return e.columns=[{title:"Codigo",dataIndex:"cod"},{title:"Nome",dataIndex:"name"},{title:"Taxa Hora",dataIndex:"ratetime"},{title:"A\xe7\xf5es",key:"action",render:function(e,t){return i.a.createElement("div",null,i.a.createElement("i",{className:"icon icon-trash",style:{marginRight:"10px"},onClick:function(e){f.a.confirm({title:"Tem certeza que deseja remover esta maquina?",onOk:function(){a.handleDeleteAddressRow(t.id,e),m.a.success("Maquina removida")},onCancel:function(){}})}}))}}],e.handleChange=e.handleChange.bind(Object(d.a)(Object(d.a)(e))),e.setStateNew=e.setStateNew.bind(Object(d.a)(Object(d.a)(e))),e.onHandleClickSave=e.onHandleClickSave.bind(Object(d.a)(Object(d.a)(e))),e.onHandleClickDelete=e.onHandleClickDelete.bind(Object(d.a)(Object(d.a)(e))),e.onHandleClickNew=e.onHandleClickNew.bind(Object(d.a)(Object(d.a)(e))),e.leftListChild=i.a.createRef(),e}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getMaquinas()}},{key:"handleDeleteAddressRow",value:function(e,t){t.preventDefault();var a=this.state.tableList.filter(function(t){return t.id!==e});this.setState({tableList:a})}},{key:"render",value:function(){return i.a.createElement(k.a,{spinning:this.state.loading,tip:this.state.loadingTip},i.a.createElement(h.a,null,i.a.createElement(b.a,{lg:5,md:5,sm:24,xs:24},this.LeftList()),i.a.createElement(b.a,{lg:15,md:15,sm:24,xs:24},this.Content(this.state.user)),i.a.createElement(b.a,{lg:4,md:4,sm:24,xs:24},i.a.createElement(v.a,{type:"inner",title:"Dashboards"},i.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.canNew,onClick:this.onHandleClickNew},"Novo"),i.a.createElement(C.a,{block:!0,type:"primary",onClick:this.onHandleClickSave,disabled:!this.state.canSave},"Salvar"),i.a.createElement("br",null),i.a.createElement(C.a,{block:!0,disabled:!this.state.canDelete,type:"primary",onClick:this.onHandleClickDelete,className:"gx-btn-red"},"Excluir")))))}}]),t}(n.Component);t.default=function(){return i.a.createElement(M,null)}}}]);
//# sourceMappingURL=5.ec478446.chunk.js.map