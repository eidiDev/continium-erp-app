(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1419:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n),o=a(37),s=a(11),l=a(12),i=a(14),c=a(13),d=a(15),u=a(3),m=a(0),h=a.n(m),g=a(1297),p=a(601),f=a(188),E=a(107),O=a(278),b=a(60),y=a(1302),C=a(1301),w=a(212),v=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement(f.a,null,h.a.createElement(E.a,{span:24},h.a.createElement(O.a,{type:"inner",title:"Tela de Follow Up"},h.a.createElement(y.a,{layout:"horizontal",size:"small"},h.a.createElement(f.a,null,h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Data Entrega inicial"},h.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange("dataInicio")})))),h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Data Entrega Final"},h.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange("dataFim")})))),h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Data Prevista inicial"},h.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange2("dataInicioM")})))),h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Data Prevista Final"},h.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange2("dataFimM")})))),h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Pedido Cliente"},h.a.createElement(w.a,{type:"number",value:this.props.filtros.id_PedidoVenda,name:"id_PedidoVenda",onChange:this.props.handleChange("id_PedidoVenda"),onKeyDown:this.props.onKeyDown})))),h.a.createElement(E.a,{lg:3,md:6,sm:12,xs:24},h.a.createElement("div",{className:"gx-form-row0"},h.a.createElement(y.a.Item,{label:"Pedido Fox"},h.a.createElement(w.a,{type:"text",value:this.props.filtros.pedido_fox,name:"pedido_fox",onChange:this.props.handleChange("pedido_fox"),onKeyDown:this.props.onKeyDown})))))))))}}]),t}(m.Component),x=a(387),D=(a(64),a(17)),k=a.n(D),Y=a(35),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this))).changeInputPr=function(e,t){t.obs=e.target.value},a.dataChangeOrderEntrega=function(e,t,a){e.data_prevista=t},a.columns=[{title:"Pedido de Venda",dataIndex:"num_salesorder",key:"num_salesorder",align:"center"},{title:"Linha do Pedido",dataIndex:"id"},{title:"Pedido Cliente",dataIndex:"lin_pedido_cliente"},{title:"Pedido Fox",dataIndex:"lin_pedido_fox"},{title:"Data Entrega",dataIndex:"data_entrega",render:function(e){return k()(e).format("DD-MM-YYYY")}},{title:"Data Prevista",dataIndex:"data_prevista",render:function(e,t){return h.a.createElement("span",null,h.a.createElement(C.a,{defaultValue:""===t.data_prevista||void 0===t.data_prevista?"":k()(t.data_prevista,"YYYY-MM-DD"),format:"DD-MM-YYYY",onChange:function(e,n){return a.dataChangeOrderEntrega(t,e,n)}}))}},{title:"C\xf3digo Produto",dataIndex:"productObj.cod"},{title:"Descri\xe7\xe3o",dataIndex:"productObj.description1",onCell:function(){return{style:{whiteSpace:"nowrap",maxWidth:150}}},render:function(e,t){return h.a.createElement(Y.a,{title:e},e)}},{title:"CFOP",dataIndex:"cfop"},{title:"Observa\xe7\xe3o",dataIndex:"obs",width:500,render:function(e,t){return h.a.createElement("span",null,h.a.createElement(w.a,{defaultValue:t.obs,type:"text",min:1,name:"produto_cliente",onChange:function(e){return a.changeInputPr(e,t)}}))}}],a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement(p.a,{spinning:!1},h.a.createElement(O.a,{type:"inner",title:"Ordens Filtras a gerar"},h.a.createElement(x.a,{scroll:{x:2500,y:2e3},rowSelection:{selectedRowKeys:this.props.selectedRowKeys,onChange:this.props.onSelectChange,fixed:!0},columns:this.columns,onChange:this.props.onChangePage,sorter:!0,bordered:!0,size:"small",dataSource:this.props.resultData,style:{margin:"-15px -24px"},loading:this.props.loading,rowKey:function(e){return e.id}})))}}]),t}(m.Component),j=a(7),I=a(59),P=a(1304),L=a(1306),M=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement(P.a,{title:"Logs",visible:this.props.showLog,onOk:this.props.onOkLog,onCancel:this.props.onOkLog,bodyStyle:{padding:0},footer:[h.a.createElement(b.a,{key:"submit",type:"primary",onClick:this.props.onOkLog},"Ok")]},h.a.createElement(O.a,{title:"",className:"gx-card"},h.a.createElement(L.a,null,this.props.logs.map(function(e){var t=e.toString();return h.a.createElement(L.a.Item,{color:t.includes("n\xe3o")?"red":"green"},e)}))))}}]),t}(h.a.Component);j.a.defaults.timeout=6e7;var _=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(c.a)(t).call(this))).handleChange=function(t){return function(a){var n=e.state.filtros;"object"===typeof a?"dataInicio"===t||"dataFim"===t?a&&(n[t]=a.format("YYYY-MM-DD")):n[t]=a.target.value:n[t]=a,e.setState({filtros:n})}},e.handleChange2=function(t){return function(a){var n=e.state.filtros;"object"===typeof a?"dataInicioM"===t||"dataFimM"===t?a&&(n[t]=a.format("YYYY-MM-DD")):n[t]=a.target.value:n[t]=a,e.setState({filtros:n})}},e.onChangePage=function(e,t){console.log(e,t)},e.onHandleClickSearch=function(){e.setState({resultsLoading:!0});var t=Object(u.a)(Object(u.a)(e));e.setState({resultData:[],selectedRowKeys:[]}),I.a.get("filterLinPdVendaFollowUp",{params:e.state.filtros}).then(function(e){console.log(e),t.setState({resultData:e.data}),g.a.success("Registros carregados.")}).catch(function(e){g.a.error("Erro ao buscar registro, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(){t.setState({resultsLoading:!1})})},e.onSelectChange=function(t,a){e.setState({selectedRowKeys:t.slice(0,5),selectedRows:a.slice(0,5)}),e.checkIfAllstatusIsOk(a)},e.onKeyDown=function(t){"Enter"===t.key&&e.onHandleClickSearch()},e.onCreateBasicData=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(u.a)(Object(u.a)(e)),"POST",t.next=6,Object(I.a)({method:"POST",url:"followup/followUpObs",data:{rows:a}}).then(function(e){console.log(e),n.setState({resultData:[],showLog:!0,logs:e.data,resultsLoading:!1}),g.a.success("Registros Criados Ou Alterados.")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 6:case"end":return t.stop()}},t)})),e.onCreateOrders=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onCreateOrders...."),e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(u.a)(Object(u.a)(e)),"POST",t.prev=5,t.next=8,Object(I.a)({method:"POST",url:"oncreateOrders",data:{rows:a}}).then(function(e){n.setState({resultData:[],showLog:!0,logs:void 0!==e.data?e.data:[],array:[]}),e.data.find(function(e){return e.includes("n\xe3o tem")})?g.a.error("Kits filhos nao tem Etapas !"):g.a.success("Ordens criadas !")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),g.a.error("Erro interno, tente novamente mais tarde!:"+t.t0.message),console.log("error",t.t0);case 14:case"end":return t.stop()}},t,null,[[5,10]])})),e.onOkLog=function(){e.setState({showLog:!1})},e.checkIfAllstatusIsOk=function(t){var a=t;if(0===a.length)e.setState({array:[]});else{var n=[],r=!0,o=!1,s=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var c=l.value;1===c.isProdutoOk&&1===c.isKitOk&&1===c.isClienteOk&&1===c.isEtapaOk&&0===c.isOrdemOk&&1===c.isDadosBaseOk&&(n.push(c),e.setState({array:n}))}}catch(d){o=!0,s=d}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}n.length===a.length||e.setState({array:[]})}},e.state={loading:!1,loadingTip:"",canGenerate:!1,resultsLoading:!1,showLog:!1,resultData:[],array:[],array2:[],selectedRowKeys:[],selectedRows:[],filtros:{pedido:"",pedidoCliente:"",cfop:"",produto:"",empresa:"",dataInicio:"",dataFim:"",dataInicioM:"",dataFimM:""},logs:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement(p.a,{spinning:this.state.loading,tip:this.state.loadingTip},h.a.createElement(M,{showLog:this.state.showLog,onOkLog:this.onOkLog,logs:this.state.logs}),h.a.createElement(f.a,null,h.a.createElement(E.a,{lg:20,md:20,sm:24,xs:24},h.a.createElement(v,{handleChange:this.handleChange,handleChange2:this.handleChange2,filtros:this.state.filtros,onKeyDown:this.onKeyDown}),h.a.createElement(S,{resultData:this.state.resultData,loading:this.state.resultsLoading,selectedRowKeys:this.state.selectedRowKeys,onSelectChange:this.onSelectChange,onChangePage:this.onChangePage})),h.a.createElement(E.a,{lg:4,md:4,sm:24,xs:24},h.a.createElement(O.a,{type:"inner",title:"A\xe7oes"},h.a.createElement(b.a,{block:!0,type:"primary",onClick:this.onHandleClickSearch},"Pesquisar"),h.a.createElement(b.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.selectedRows.length>0,onClick:this.onCreateBasicData},"Salvar")))))}}]),t}(m.Component);t.default=_}}]);
//# sourceMappingURL=12.b5981666.chunk.js.map