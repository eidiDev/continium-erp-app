(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1418:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n),o=a(37),s=a(11),i=a(12),c=a(14),l=a(13),u=a(15),d=a(3),h=a(0),p=a.n(h),g=a(1297),m=a(601),f=a(188),b=a(107),O=a(278),C=a(60),S=a(1302),E=a(132),y=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.listOfMaquinas;return p.a.createElement(f.a,null,p.a.createElement(b.a,{span:24},p.a.createElement(O.a,{type:"inner",title:"Gerenciamento de Prioridades"},p.a.createElement(S.a,{layout:"horizontal",size:"small"},p.a.createElement(f.a,null,p.a.createElement(b.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(S.a.Item,{label:"Maquinas"},p.a.createElement(E.a,{style:{width:400},showSearch:!0,placeholder:"Filtrar por maquina",onChange:this.props.handleMaquina,filterOption:function(e,t){return-1!==t.props.children[0].concat(t.props.children[1],t.props.children[2]).toUpperCase().indexOf(e.toUpperCase())}},e.map(function(e){return p.a.createElement(E.a.Option,{value:e.cod},e.cod,"-",e.name)}))))))))))}}]),t}(h.Component),v=a(21),w=a(212),x=a(18),j=a(619),k=a(387),P=a(17),L=a.n(P),M=a(1393),q=a.n(M),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,o=t.confirm,s=t.clearFilters;return p.a.createElement("div",{style:{padding:8}},p.a.createElement(w.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,o,e)},style:{width:188,marginBottom:8,display:"block"}}),p.a.createElement(C.a,{type:"primary",onClick:function(){return a.handleSearch(r,o,e)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),p.a.createElement(C.a,{onClick:function(){return a.handleReset(s)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return p.a.createElement(x.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(t){return"finalizada"===t?p.a.createElement(j.a,{color:"green"},t.toUpperCase()):"execucao"===t?p.a.createElement(j.a,{color:"orange"}," ",t.toUpperCase()):"planejada"===t?p.a.createElement(j.a,{color:"purple"}," ",t.toUpperCase()):"liberada"===t?p.a.createElement(j.a,{color:"blue"}," ",t.toUpperCase()):"pausada"===t?p.a.createElement(j.a,{color:"red"}," ",t.toUpperCase()):a.state.searchedColumn===e?p.a.createElement(q.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.changeOrder=function(e,t,a){t.prioridadeEtapa=parseInt(e.target.value)},a.state={searchText:"",searchedColumn:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=[{title:"C\xf3d. Maquina",dataIndex:"maquina",width:100,key:"maquina",align:"center"},{title:"C\xf3d. Montagem",dataIndex:"montagem",width:100,key:"montagem",align:"center"},Object(v.a)({title:"Status da Etapa",dataIndex:"statusEtapa",render:function(e){return"finalizada"===e?p.a.createElement(j.a,{color:"green"},e.toUpperCase()):"execucao"===e?p.a.createElement(j.a,{color:"orange"}," ",e.toUpperCase()):"planejada"===e?p.a.createElement(j.a,{color:"#EBEBEF"}," ",e.toUpperCase()):"liberada"===e?p.a.createElement(j.a,{color:"blue"}," ",e.toUpperCase()):"pausada"===e?p.a.createElement(j.a,{color:"red"}," ",e.toUpperCase()):void 0},align:"center"},this.getColumnSearchProps("statusEtapa")),{title:"Prioridade Etapa",dataIndex:"prioridadeEtapa",render:function(t,a){return p.a.createElement(w.a,{onChange:function(t){return e.changeOrder(t,a,a.id)},key:a.id,type:"number",min:1,defaultValue:t,style:{width:"100%"},disabled:"execucao"===a.statusEtapa})}},Object(v.a)({title:"Ordem de Produ\xe7\xe3o",dataIndex:"orderProduction"},this.getColumnSearchProps("orderProduction")),Object(v.a)({title:"Ordem Principal",dataIndex:"ordemPrincipal"},this.getColumnSearchProps("ordemPrincipal")),Object(v.a)({title:"Ped. Cliente",dataIndex:"pedidoCliente"},this.getColumnSearchProps("pedidoCliente")),Object(v.a)({title:"Ped. Venda",dataIndex:"orderFox"},this.getColumnSearchProps("orderFox")),Object(v.a)({title:"Cod. Produto",dataIndex:"product"},this.getColumnSearchProps("product")),Object(v.a)({title:"Produto",dataIndex:"description1"},this.getColumnSearchProps("description1")),{title:"Qtde Prevista",dataIndex:"qtde"},Object(v.a)({title:"Data Entrega",dataIndex:"dataEntrega",render:function(e){return L()(e).format("DD-MM-YYYY")}},this.getColumnSearchProps("dataEntrega")),Object(v.a)({title:"Cliente",dataIndex:"cliente",align:"center"},this.getColumnSearchProps("cliente"))];return p.a.createElement(m.a,{spinning:!1},p.a.createElement(O.a,{type:"inner",title:"Maquinas"},p.a.createElement(k.a,{scroll:{x:2500,y:2e3},rowSelection:{selectedRowKeys:this.props.selectedRowKeys,onChange:this.props.onSelectChange},columns:t,onChange:this.props.onChangePage,sorter:!0,bordered:!0,size:"small",dataSource:this.props.resultData,style:{margin:"-15px -24px"},loading:this.props.loading,rowKey:function(e){return e.id}})))}}]),t}(h.Component),R=a(59),I=a(1304),T=a(1306),F=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement(I.a,{title:"Logs",visible:this.props.showLog,onOk:this.props.onOkLog,onCancel:this.props.onOkLog,bodyStyle:{padding:0},footer:[p.a.createElement(C.a,{key:"submit",type:"primary",onClick:this.props.onOkLog},"Ok")]},p.a.createElement(O.a,{title:"",className:"gx-card"},p.a.createElement(T.a,null,this.props.logs.map(function(e){var t=e.toString();return p.a.createElement(T.a.Item,{color:t.includes("n\xe3o tem")?"red":"green"},e)}))))}}]),t}(p.a.Component);a(625);R.a.defaults.timeout=6e7;var K=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).getMaquinas=function(){R.a.get("MachineLabor/",{}).then(function(t){var a=t.data.data.filter(function(e){return"maquina"===e.type||"montagem"===e.type});e.setState({listOfMaquinas:a})}).catch(function(e){console.log(e)})},e.handleChange=function(t){return function(a){var n=e.state.filtros;"object"===typeof a?"dataInicio"===t||"dataFim"===t?a&&(n[t]=a.format("YYYY-MM-DD")):n[t]=a.target.value:n[t]=a,e.setState({filtros:n})}},e.onChangePage=function(e,t){console.log(e,t)},e.onHandleClickSearch=function(){e.setState({resultsLoading:!0});var t=Object(d.a)(Object(d.a)(e));e.setState({resultData:[],selectedRowKeys:[]}),R.a.get("filterPdfVenda/",{params:e.state.filtros}).then(function(e){t.setState({resultData:e.data}),g.a.success("Registros carregados.")}).catch(function(e){g.a.error("Erro ao buscar registro, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(){t.setState({resultsLoading:!1})})},e.onSelectChange=function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},e.onKeyDown=function(t){"Enter"===t.key&&e.onHandleClickSearch()},e.onCreateBasicData=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(d.a)(Object(d.a)(e)),"POST",console.log(a),t.next=7,Object(R.a)({method:"POST",url:"foxControllerPd/onCreateBasicData",data:{rows:a}}).then(function(e){n.setState({resultData:[],showLog:!0,logs:e.data,resultsLoading:!1}),g.a.success("Registros Criados Ou Alterados.")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 7:case"end":return t.stop()}},t)})),e.onCreateOrders=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onCreateOrders...."),e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(d.a)(Object(d.a)(e)),"POST",t.prev=5,t.next=8,Object(R.a)({method:"POST",url:"foxControllerPd/onCreateOrders",data:{rows:a}}).then(function(e){n.setState({resultData:[],showLog:!0,logs:void 0!==e.data?e.data:[],array:[]}),e.data.find(function(e){return e.includes("n\xe3o tem")})?g.a.error("Kits filhos nao tem Etapas !"):g.a.success("Ordens criadas !")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),g.a.error("Erro interno, tente novamente mais tarde!:"+t.t0.message),console.log("error",t.t0);case 14:case"end":return t.stop()}},t,null,[[5,10]])})),e.onChangeStatus=function(){var t=Object(o.a)(r.a.mark(function t(a){var n,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onCreateOrders...."),e.setState({resultsLoading:!0}),n=e.state.selectedRows,o=Object(d.a)(Object(d.a)(e)),s=e.state.idMaquina,"POST",t.prev=6,t.next=9,Object(R.a)({method:"POST",url:"changeStatusMaq",data:{type:a,rows:n}}).then(function(e){o.getDataFromServer(s),o.setState({resultsLoading:!1}),g.a.success("Etapas atualizadas !")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){o.setState({resultsLoading:!1})});case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),g.a.error("Erro interno, tente novamente mais tarde!:"+t.t0.message),console.log("error",t.t0);case 15:case"end":return t.stop()}},t,null,[[6,11]])}));return function(e){return t.apply(this,arguments)}}(),e.onOkLog=function(){e.setState({showLog:!1})},e.mudarPrioridade=Object(o.a)(r.a.mark(function t(){var a,n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onCreateOrders...."),e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(d.a)(Object(d.a)(e)),o=e.state.idMaquina,"POST",t.prev=6,t.next=9,Object(R.a)({method:"POST",url:"changePriorMaq",data:{idMaquina:o,rows:a}}).then(function(e){n.getDataFromServer(o),n.setState({resultsLoading:!1}),g.a.success("Etapas atualizadas !")}).catch(function(e){g.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),g.a.error("Erro interno, tente novamente mais tarde!:"+t.t0.message),console.log("error",t.t0);case 15:case"end":return t.stop()}},t,null,[[6,11]])})),e.checkIfAllstatusIsOk=function(t){var a=t;if(0===a.length)e.setState({array:[]});else{var n=[],r=!0,o=!1,s=void 0;try{for(var i,c=a[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;void 0===l.linhas.find(function(e){return 0===e.isDadosBaseOk})&&(n.push(l),e.setState({array:n}))}}catch(u){o=!0,s=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}n.length===a.length||e.setState({array:[]})}},e.handleMaquina=function(t){e.setState({idMaquina:t}),e.getDataFromServer(t)},e.getDataFromServer=function(){var t=Object(o.a)(r.a.mark(function t(a,n){var o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={},e.setState({resultsLoading:!0}),s={offset:n},t.next=5,R.a.get("/prioridade?idMaquina=".concat(a),{params:s}).then(function(t){o=t.data,e.setState({resultData:o,resultsLoading:!1})}).then(function(e){}).catch(function(e){console.log(e)});case 5:return t.abrupt("return",o);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.setStateDrag=function(){var t=Object(o.a)(r.a.mark(function t(a){var n,o,s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.idMaquina,e.setState({resultsLoading:!0}),o=[],s=0,a.forEach(function(e){s+=1;var t={id:e.id,statusEtapa:e.statusEtapa,maquina:null===e.maquina||void 0===e.maquina?e.montagem:e.maquina,index:s};o.push(t)}),t.next=7,R.a.patch("/prioridade",{listUpdate:o,idMaquina:n}).then(function(t){e.setState({resultData:t.data,resultsLoading:!1})}).then(function(t){e.setState({loading:!1,resultsLoading:!1})}).catch(function(e){console.log(e)});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!1,loadingTip:"",canGenerate:!1,resultsLoading:!1,showLog:!1,resultData:[],array:[],array2:[],selectedRowKeys:[],selectedRows:[],filtros:{pedido:"",pedidoCliente:"",cfop:"",produto:"",empresa:"",dataInicio:"",dataFim:"",dataInicioM:"",dataFimM:""},logs:[],listOfMaquinas:[],idMaquina:""},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.getMaquinas()}},{key:"render",value:function(){var e=this;return p.a.createElement(m.a,{spinning:this.state.loading,tip:this.state.loadingTip},p.a.createElement(F,{showLog:this.state.showLog,onOkLog:this.onOkLog,logs:this.state.logs}),p.a.createElement(f.a,null,p.a.createElement(b.a,{lg:20,md:20,sm:24,xs:24},p.a.createElement(y,{handleMaquina:this.handleMaquina,listOfMaquinas:this.state.listOfMaquinas,handleChange:this.handleChange,moveRow:this.moveRow,filtros:this.state.filtros,onKeyDown:this.onKeyDown}),p.a.createElement(D,{resultData:this.state.resultData,loading:this.state.resultsLoading,selectedRowKeys:this.state.selectedRowKeys,onSelectChange:this.onSelectChange,onChangePage:this.onChangePage,setStateDrag:this.setStateDrag})),p.a.createElement(b.a,{lg:4,md:4,sm:24,xs:24},p.a.createElement(O.a,{type:"inner",title:"A\xe7oes"},p.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-purple",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.onChangeStatus("planejada")}},"Planejada"),p.a.createElement(C.a,{block:!0,type:"primary",lassName:"gx-btn-blue",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.onChangeStatus("liberada")}},"Liberada"),p.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-orange",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.onChangeStatus("execucao")}},"Em Execu\xe7\xe3o"),p.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-red",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.onChangeStatus("pausada")}},"Pausada"),p.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.onChangeStatus("finalizada")}},"Finalizada"),p.a.createElement(C.a,{block:!0,type:"primary",className:"gx-btn-dark",disabled:!this.state.selectedRows.length>0,onClick:function(){return e.mudarPrioridade()}},"Mudar Prioridade")))))}}]),t}(h.Component);t.default=K}}]);
//# sourceMappingURL=18.13aa2e61.chunk.js.map