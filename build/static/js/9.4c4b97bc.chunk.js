(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1317:function(e,t,a){},1423:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(11),r=a(12),o=a(14),s=a(13),i=a(15),u=a(3),d=a(132),m=a(1297),f=a(1304),h=a(188),g=a(107),E=a(1302),b=a(278),C=a(212),v=a(601),p=a(60),w=a(58),k=a(7),O=a(68),S=[{title:"Username",dataIndex:"username",key:"username",render:function(e){return e}},{title:"Tipo",dataIndex:"role",key:"role",render:function(e){return e.toUpperCase()}},{title:"Email",dataIndex:"email",key:"email"}],j="users",N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this))).fetchLeftList=function(){console.log("fecthLeftlist"),k.a.get("".concat(j,"/"),{}).then(function(e){a.setState({data:e.data})}).catch(function(e){console.log("error",e)})},console.log("ListUSers - Constructor"),console.log(e),a.state={data:[]},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("ComponentDidMout - CustomerList"),this.fetchLeftList()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(O.a,{columns:S,data:this.state.data,onRowClick:function(t,a){return{onClick:function(n){return e.props.onClickRow(t,a)}}}}))}}]),t}(n.Component),x=(a(1317),d.a.Option),L="users",y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).onHandleClickNew=function(){e.setStateNew()},e.handleOnClickRow1=function(t,a){var n=Object(u.a)(Object(u.a)(e));e.setState({loading:!0,loadingTip:"Carregando registro, aguarde..."}),setTimeout(function(){k.a.get("".concat(L,"/").concat(t.id),{}).then(function(e){m.a.success("Usuario carregada com sucesso!"),n.setStateEdit(e.data)}).catch(function(e){m.a.error("Erro ao buscar registro, tente novamente mais tarde!"),n.setStateNew()})},1e3)},e.onHandleClickSave=function(){var t=e.state.user,a=Object(u.a)(Object(u.a)(e));e.setState({loading:!0,loadingTip:"Salvando registro, aguarde..."}),setTimeout(function(){var e="PATCH",n="".concat(L,"/").concat(t.id);a.state.isNew&&(e="POST",n="api/users");var c=t.username,l=t.email,r=t.password,o=t.role;Object(k.a)({method:e,url:n,data:{username:c,email:l,password:r,role:o}}).then(function(e){m.a.success("Usuario salvo com sucesso!"),a.setStateEdit(e.data),a.leftListChild.current.fetchLeftList()}).catch(function(e){a.setStateEdit(t),m.a.error("Erro ao gravar registro, tente novamente mais tarde!")})},1e3)},e.onCancel=function(){w.a.replace("/dashboard"),document.location.reload(!0)},e.onHandleClickDelete=function(){var t=e.state.user,a=Object(u.a)(Object(u.a)(e));f.a.confirm({title:"Tem certeza que deseja excluir esse registro?",onOk:function(){a.setState({loading:!0,loadingTip:"Excluindo registro, aguarde..."}),setTimeout(function(){var e="".concat(L,"/").concat(t.id);Object(k.a)({method:"DELETE",url:e}).then(function(e){m.a.success("Registro excluido com sucesso!"),a.setStateNew(),a.leftListChild.current.fetchLeftList()}).catch(function(e){m.a.error("Erro ao excluir registro, tente novamente mais tarde!")})},1e3),a.setStateNew()},onCancel:function(){}})},e.setStateNew=function(){e.setState({canSave:!0,canNew:!0,canDelete:!1,user:{},loading:!1,isNew:!0,refreshLeftList:!1})},e.setStateEdit=function(t){e.setState({canSave:!0,canNew:!0,canDelete:!0,user:t,loading:!1,isNew:!1})},e.handleChange=function(t){var a=e.state.user;a[t.target.name]=t.target.value,e.setState(function(){return{user:a}})},e.LeftList=function(){return c.a.createElement(N,{onClickRow:e.handleOnClickRow1,ref:e.leftListChild})},e.handleTip=function(t){var a=e.state.user;a.role=t,e.setState({user:a})},e.Content=function(t){return c.a.createElement("div",{className:"main"},c.a.createElement(h.a,null,c.a.createElement(g.a,{span:24},c.a.createElement(E.a,{layout:"horizontal",size:"small"},c.a.createElement(b.a,{type:"inner",title:"Dados do usu\xe1rio"},c.a.createElement(h.a,null,c.a.createElement(g.a,{lg:6,md:8,sm:12,xs:24},c.a.createElement("div",{className:"gx-form-row0"},c.a.createElement(E.a.Item,{label:"Usename"},c.a.createElement(C.a,{type:"text",value:t.username,name:"username",onChange:e.handleChange})))),c.a.createElement(g.a,{lg:6,md:8,sm:12,xs:24},c.a.createElement("div",{className:"gx-form-row0"},c.a.createElement(E.a.Item,{label:"Email"},c.a.createElement(C.a,{type:"text",value:t.email,name:"email",onChange:e.handleChange})))),c.a.createElement(g.a,{lg:6,md:8,sm:12,xs:24},c.a.createElement("div",{className:"gx-form-row0"},c.a.createElement(E.a.Item,{label:"Senha"},c.a.createElement(C.a,{type:"password",value:t.password,name:"password",onChange:e.handleChange})))),c.a.createElement(g.a,{lg:6,md:8,sm:12,xs:24},c.a.createElement("div",{className:"gx-form-row0"},c.a.createElement(E.a.Item,{label:"Tipo"},c.a.createElement(d.a,{value:t.role,style:{width:200},onChange:e.handleTip},c.a.createElement(x,{value:"admin"},"Admin"),c.a.createElement(x,{value:"normal"},"Normal")))))))))))},e.state={isNew:!0,loader:!0,user:{},canNew:!0,canSave:!0,canDelete:!1,loading:!1},e.handleChange=e.handleChange.bind(Object(u.a)(Object(u.a)(e))),e.setStateNew=e.setStateNew.bind(Object(u.a)(Object(u.a)(e))),e.onHandleClickSave=e.onHandleClickSave.bind(Object(u.a)(Object(u.a)(e))),e.onHandleClickDelete=e.onHandleClickDelete.bind(Object(u.a)(Object(u.a)(e))),e.onHandleClickNew=e.onHandleClickNew.bind(Object(u.a)(Object(u.a)(e))),e.leftListChild=c.a.createRef(),e}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(v.a,{spinning:this.state.loading,tip:this.state.loadingTip},c.a.createElement(h.a,null,c.a.createElement(g.a,{lg:5,md:5,sm:24,xs:24},this.LeftList()),c.a.createElement(g.a,{lg:15,md:15,sm:24,xs:24},this.Content(this.state.user)),c.a.createElement(g.a,{lg:4,md:4,sm:24,xs:24},c.a.createElement(b.a,{className:"gx-card",title:"Usu\xe1rio"},c.a.createElement(p.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.canNew,onClick:this.onHandleClickNew},"Novo"),c.a.createElement(p.a,{block:!0,type:"primary",onClick:this.onHandleClickSave,disabled:!this.state.canSave},"Salvar"),c.a.createElement("br",null),c.a.createElement(p.a,{block:!0,disabled:!this.state.canDelete,type:"primary",onClick:this.onHandleClickDelete,className:"gx-btn-red"},"Excluir")))))}}]),t}(n.Component);t.default=function(){return c.a.createElement(y,null)}}}]);
//# sourceMappingURL=9.4c4b97bc.chunk.js.map