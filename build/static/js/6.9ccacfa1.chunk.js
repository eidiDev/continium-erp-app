(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1398:function(e,t){},1400:function(e,t){},1413:function(e,t,a){},1421:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(11),s=a(12),r=a(14),l=a(13),i=a(15),m=a(3),u=a(132),d=a(1297),h=a(1304),g=a(188),f=a(107),E=a(1302),p=a(278),v=a(212),C=a(180),b=a(387),w=a(601),k=a(60),S=a(58),x=a(167),L=a.n(x),N=(a(1395),L.a.create({baseURL:"https://pneumax-adonis-api.herokuapp.com/",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"}})),O=a(68),y=[{title:"Username",dataIndex:"username",key:"username",render:function(e){return e}},{title:"Nome",dataIndex:"nome",key:"nome"},{title:"Sobrenome",dataIndex:"sobrenome",key:"sobrenome"}],j="consultastock",I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this))).fetchLeftList=function(){console.log("fecthLeftlist"),N.get("".concat(j,"/"),{}).then(function(e){var t=e.data.data.sort(function(e,t){return e.nome<t.nome?-1:e.nome>t.nome?1:0});a.setState({data:t})}).catch(function(e){console.log("error",e)})},console.log("ListUSers - Constructor"),console.log(e),a.state={data:[]},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("ComponentDidMout - CustomerList"),this.fetchLeftList()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(O.a,{pageSize:6,columns:y,data:this.state.data,onRowClick:function(t,a){return{onClick:function(n){return e.props.onClickRow(t,a)}}}}))}}]),t}(n.Component),T=(a(1413),a(626)),D=(a(17),u.a.Option),H="consultastock",P=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(l.a)(t).call(this))).onHandleClickNew=function(){e.setStateNew()},e.handleOnClickRow1=function(t,a){var n=Object(m.a)(Object(m.a)(e));e.setState({loading:!0,loadingTip:"Carregando registro, aguarde..."}),setTimeout(function(){N.get("".concat(H,"/").concat(t.id),{}).then(function(e){d.a.success("Usuario carregada com sucesso!"),n.setStateEdit(e.data)}).catch(function(e){d.a.error("Erro ao buscar registro, tente novamente mais tarde!"),n.setStateNew()})},1e3)},e.onHandleClickSave=function(){var t=e.state.user,a=Object(m.a)(Object(m.a)(e)),n=e.state.checkListSelect;e.setState({loading:!0,loadingTip:"Salvando registro, aguarde..."}),setTimeout(function(){var e="PATCH",o="".concat(H,"/").concat(t.id);a.state.isNew&&(e="POST",o="".concat(H));var c=t.username,s=t.nome,r=t.sobrenome,l=t.senha,i=t.ativo,m=t.showPrice,u=t.qty_show,h=t.limiteAcesso;N({method:e,url:o,data:{groups_grants:JSON.stringify(n),nome:s,sobrenome:r,username:c,senha:l,ativo:i,limiteAcesso:parseInt(h),showPrice:m,qty_show:u}}).then(function(e){d.a.success("Usuario salvo com sucesso!"),a.setStateEdit(e.data),a.leftListChild.current.fetchLeftList()}).catch(function(e){a.setStateEdit(t),d.a.error("Erro ao gravar registro, tente novamente mais tarde!")})},1e3)},e.onCancel=function(){S.a.replace("/dashboard"),document.location.reload(!0)},e.onHandleClickDelete=function(){var t=e.state.user,a=Object(m.a)(Object(m.a)(e));h.a.confirm({title:"Tem certeza que deseja excluir esse registro?",onOk:function(){a.setState({loading:!0,loadingTip:"Excluindo registro, aguarde..."}),setTimeout(function(){var e="".concat(H,"/").concat(t.id);N({method:"DELETE",url:e}).then(function(e){d.a.success("Registro excluido com sucesso!"),a.setStateNew(),a.leftListChild.current.fetchLeftList()}).catch(function(e){d.a.error("Erro ao excluir registro, tente novamente mais tarde!")})},1e3),a.setStateNew()},onCancel:function(){}})},e.setStateNew=function(){e.setState({canSave:!0,canNew:!0,canDelete:!1,user:{},checkListSelect:[],loading:!1,isNew:!0,refreshLeftList:!1,showInputLimit:!1})},e.setStateEdit=function(t){var a=t.groups_grants,n="limitado"===t.qty_show;e.setState({canSave:!0,canNew:!0,canDelete:!0,user:t,checkListSelect:a,loading:!1,showInputLimit:n,isNew:!1})},e.handleChange=function(t){var a=e.state.user;a[t.target.name]=t.target.value,e.setState(function(){return{user:a}})},e.LeftList=function(){return o.a.createElement(I,{onClickRow:e.handleOnClickRow1,ref:e.leftListChild})},e.handleTip=function(t){var a=e.state.user;a.qty_show=t,e.setState({user:a}),"limitado"===t?e.setState({showInputLimit:!0}):e.setState({showInputLimit:!1})},e.handleTip2=function(t){e.setState({checkListSelect:t})},e.onChangeCheck1=function(t){var a=e.state.user;a.ativo=t.target.checked,e.setState({user:a})},e.onChangeCheck2=function(t){var a=e.state.user;a.showPrice=t.target.checked,e.setState({user:a})},e.Content=function(t){return o.a.createElement("div",{className:"main"},o.a.createElement(g.a,null,o.a.createElement(f.a,{span:24},o.a.createElement(E.a,{layout:"horizontal",size:"small"},o.a.createElement(p.a,{type:"inner",title:"Stock Usu\xe1rios"},o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Nome"},o.a.createElement(v.a,{type:"text",value:t.nome,name:"nome",onChange:e.handleChange})))),o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Sobrenome"},o.a.createElement(v.a,{type:"text",value:t.sobrenome,name:"sobrenome",onChange:e.handleChange})))),o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Usu\xe1rio"},o.a.createElement(v.a,{type:"text",value:t.username,name:"username",onChange:e.handleChange})))),o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Senha"},o.a.createElement(v.a,{type:"password",value:t.senha,name:"senha",onChange:e.handleChange}))))),o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Ativo"},o.a.createElement(C.a,{checked:e.state.user.ativo,onChange:e.onChangeCheck1})))),o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Mostrar Pre\xe7o"},o.a.createElement(C.a,{checked:e.state.user.showPrice,onChange:e.onChangeCheck2}))))),o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:9,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Quantidade de registros por dia"},o.a.createElement(u.a,{value:t.qty_show,style:{width:200},onChange:e.handleTip},o.a.createElement(D,{value:"ilimitado"},"Ilimitado"),o.a.createElement(D,{value:"limitado"},"Limitado"))))),!0===e.state.showInputLimit?o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Registros"},o.a.createElement(v.a,{type:"text",value:t.limiteAcesso,name:"limiteAcesso",onChange:e.handleChange})))):""),o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:6,md:8,sm:12,xs:24},o.a.createElement("div",{className:"gx-form-row0"},o.a.createElement(E.a.Item,{label:"Grupos"},o.a.createElement(u.a,{mode:"multiple",style:{width:200},onChange:e.handleTip2,value:null===e.state.checkListSelect?[]:e.state.checkListSelect},e.state.groups.map(function(e){return o.a.createElement(D,{value:e.C\u00f3digo},e.Descri\u00e7\u00e3o)})))))),o.a.createElement(g.a,null)),o.a.createElement(p.a,{type:"inner",title:"Logs"},o.a.createElement(b.a,{className:"gx-table-responsive",dataSource:e.state.user.logs,size:"small",rowKey:"id",style:{margin:"-15px -24px"},columns:e.columns}))))))},e.state={isNew:!0,loader:!0,user:{ativo:!1,showPrice:!1},groups:[],checkListSelect:[],canNew:!0,canSave:!0,canDelete:!1,loading:!1,showInputLimit:!1},e.columns=[{title:"Dia",dataIndex:"created_at",render:function(e){var t=T.utc(e);return T.tz(t,T.tz.guess()).format("DD-MM-YYYY")}},{title:"Hora",dataIndex:"created_at",render:function(e){return T.tz(e,T.tz.guess()).format("HH:mm:ss")}},{title:"Produto Consultado",dataIndex:"produto_consultado"}],e.handleChange=e.handleChange.bind(Object(m.a)(Object(m.a)(e))),e.setStateNew=e.setStateNew.bind(Object(m.a)(Object(m.a)(e))),e.onHandleClickSave=e.onHandleClickSave.bind(Object(m.a)(Object(m.a)(e))),e.onHandleClickDelete=e.onHandleClickDelete.bind(Object(m.a)(Object(m.a)(e))),e.onHandleClickNew=e.onHandleClickNew.bind(Object(m.a)(Object(m.a)(e))),e.leftListChild=o.a.createRef(),e}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.get("getGrouposFox",{}).then(function(t){e.setState({groups:t.data})}).catch(function(e){d.a.error("Erro ao buscar registro, tente novamente mais tarde!")})}},{key:"render",value:function(){return o.a.createElement(w.a,{spinning:this.state.loading,tip:this.state.loadingTip},o.a.createElement(g.a,null,o.a.createElement(f.a,{lg:5,md:5,sm:24,xs:24},this.LeftList()),o.a.createElement(f.a,{lg:15,md:15,sm:24,xs:24},this.Content(this.state.user)),o.a.createElement(f.a,{lg:4,md:4,sm:24,xs:24},o.a.createElement(p.a,{className:"gx-card",title:"Stock Usu\xe1rios"},o.a.createElement(k.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.canNew,onClick:this.onHandleClickNew},"Novo"),o.a.createElement(k.a,{block:!0,type:"primary",onClick:this.onHandleClickSave,disabled:!this.state.canSave},"Salvar"),o.a.createElement("br",null),o.a.createElement(k.a,{block:!0,disabled:!this.state.canDelete,type:"primary",onClick:this.onHandleClickDelete,className:"gx-btn-red"},"Excluir")))))}}]),t}(n.Component);t.default=function(){return o.a.createElement(P,null)}}}]);
//# sourceMappingURL=6.9ccacfa1.chunk.js.map