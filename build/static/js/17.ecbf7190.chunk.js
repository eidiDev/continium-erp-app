(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1427:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a(12),o=a(14),i=a(13),s=a(15),r=a(3),l=a(0),d=a.n(l),u=a(212),m=a(1297),g=a(1304),h=a(188),f=a(107),v=a(1302),C=a(278),b=a(180),p=a(601),E=a(58),w=a(63),S=a.n(w),O=a(7),k=a(619),j=a(68),N=a(35),x=[{title:"C\xf3digo do grupo",dataIndex:"cod",key:"cod",render:function(e){return e}},{title:"Descri\xe7\xe3o",dataIndex:"description",key:"description",onCell:function(){return{style:{whiteSpace:"nowrap",maxWidth:150}}},render:function(e){return d.a.createElement(N.a,{title:e},e)}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return d.a.createElement("span",null,"true"===e.toString()?d.a.createElement(k.a,{color:"green"},"Ativo"):d.a.createElement(k.a,{color:"red"},"Desativo"))}}],L="SubGrupoMatriz",y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).fetchLeftList=function(){console.log("fecthLeftlist"),O.a.get("".concat(L,"/?sort=cod ASC&limit=999&populate=false"),{}).then(function(e){a.setState({data:e.data.data})}).catch(function(e){console.log("error",e)})},console.log("ListUSers - Constructor"),console.log(e),a.state={data:[]},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){console.log("ComponentDidMout - CustomerList"),this.fetchLeftList()}},{key:"render",value:function(){var e=this;return d.a.createElement(j.a,{columns:x,data:this.state.data,onRowClick:function(t,a){return{onClick:function(n){return e.props.onClickRow(t,a)}}}})}}]),t}(l.Component),H=a(111),D=a(132),T=function(e){function t(){var e,a;Object(n.a)(this,t);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={itens:[],loading:!0},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.tipo;console.log(t),O.a.get("matrizcalculocilindro").then(function(t){e.setState({itens:t.data.data})}).catch(function(e){}).then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.itens,a=e.loading,n=this.props,c=n.label,o=n.value,i=n.onChange,s=n.name;return d.a.createElement(v.a.Item,{label:c,required:!0},d.a.createElement(D.a,{loading:a,placeholder:"Selecione um registro",value:o,name:s,onChange:i},t.map(function(e){return d.a.createElement(D.a.Option,{key:e.id,v:!0,value:e.id},e.codigo," - ",e.description)})))}}]),t}(l.Component),R=u.a.TextArea,q="SubGrupoMatriz",I=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(i.a)(t).call(this))).onHandleClickNew=function(){e.setStateNew()},e.handleOnClickRow1=function(t,a){var n=Object(r.a)(Object(r.a)(e));e.setState({loading:!0,loadingTip:"Carregando registro, aguarde..."}),O.a.get("".concat(q,"/").concat(t.id),{}).then(function(e){m.a.success("Categoria carregada com sucesso!"),n.setStateEdit(e.data)}).catch(function(e){m.a.error("Erro ao buscar registro, tente novamente mais tarde!"),n.setStateNew()})},e.onHandleClickSave=function(){if(e.validator.allValid()){var t=e.state.categ,a=Object(r.a)(Object(r.a)(e));e.setState({loading:!0,loadingTip:"Salvando registro, aguarde..."});var n="PATCH",c="".concat(q,"/").concat(t.id);a.state.isNew&&(n="POST",c="".concat(q));var o=t.cod,i=t.description,s=t.obs,l=t.status,d=t.camisa,u=t.haste;Object(O.a)({method:n,url:c,data:{cod:o,description:i,obs:s,status:l,camisa:d,haste:u}}).then(function(e){m.a.success("Categoria salva com sucesso!"),a.setStateEdit(e.data),a.leftListChild.current.fetchLeftList()}).catch(function(e){console.log(e),a.setStateEdit(t),m.a.error("Erro ao gravar registro, tente novamente mais tarde!")})}else m.a.warning("Campos obrigat\xf3rios em branco!"),e.validator.showMessages(),e.forceUpdate()},e.onCancel=function(){E.a.replace("/dashboard"),document.location.reload(!0)},e.onChangeCheck=function(t){var a=e.state.categ;a.status=t.target.checked,e.setState({categ:a})},e.onHandleClickDelete=function(){var t=e.state.categ,a=Object(r.a)(Object(r.a)(e));g.a.confirm({title:"Tem certeza que deseja excluir esse registro?",onOk:function(){a.setState({loading:!0,loadingTip:"Excluindo registro, aguarde..."}),setTimeout(function(){var e="".concat(q,"/").concat(t.id);Object(O.a)({method:"DELETE",url:e}).then(function(e){m.a.success("Registro excluido com sucesso!"),a.setStateNew(),a.leftListChild.current.fetchLeftList()}).catch(function(e){m.a.error(e.response.data.message)})},1e3),a.setStateNew()},onCancel:function(){}})},e.setStateNew=function(){e.setState({canSave:!0,canNew:!0,canDelete:!1,categ:{status:!1},loading:!1,isNew:!0,refreshLeftList:!1})},e.setStateEdit=function(t){console.log(t);var a=t;a.camisa=t.camisa?t.camisa.id:void 0,a.haste=t.haste?t.haste.id:void 0,console.log(a),e.setState({canSave:!0,canNew:!0,canDelete:!0,categ:a,loading:!1,isNew:!1})},e.handleCamisa=function(t){var a=e.state.categ;a.camisa=t,e.setState(function(){return{categ:a}})},e.handleHaste=function(t){var a=e.state.categ;a.haste=t,e.setState(function(){return{categ:a}})},e.LeftList=function(){return d.a.createElement(y,{onClickRow:e.handleOnClickRow1,ref:e.leftListChild})},e.Content=function(t){return d.a.createElement("div",{className:"main"},d.a.createElement(h.a,null,d.a.createElement(f.a,{span:24},d.a.createElement(v.a,{layout:"horizontal"},d.a.createElement(C.a,{type:"inner",title:"Cadastro de sub-grupos"},d.a.createElement(h.a,null,d.a.createElement(f.a,{lg:6,md:6,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(v.a.Item,{label:"C\xf3digo",required:!0},d.a.createElement(u.a,{type:"text",value:t.cod,name:"cod",disabled:!e.state.isNew,onChange:e.handleChange}),e.validator.message("cod",t.cod,"required|string",{className:"text-danger"})))),d.a.createElement(f.a,{lg:6,md:6,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(v.a.Item,{label:"Descri\xe7\xe3o",required:!0},d.a.createElement(u.a,{type:"text",value:t.description,name:"description",onChange:e.handleChange}),e.validator.message("description",t.description,"required|string",{className:"text-danger"})))),d.a.createElement(f.a,{lg:2,md:2,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(v.a.Item,{label:"Ativo"},d.a.createElement(b.a,{checked:e.state.categ.status,onChange:e.onChangeCheck})))),d.a.createElement(f.a,{lg:5,md:5,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(T,{label:"Tabela Haste",tipo:1,value:e.state.categ.haste,onChange:e.handleHaste,required:!0}))),d.a.createElement(f.a,{lg:5,md:5,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(T,{label:"Tabela Camisa",tipo:2,name:"camisa",ref:"camisa",value:e.state.categ.camisa,onChange:e.handleCamisa,required:!0}))),d.a.createElement(f.a,{lg:12,md:12,sm:12,xs:24},d.a.createElement("div",{className:"gx-form-row0"},d.a.createElement(v.a.Item,{label:"Observa\xe7\xe3o"},d.a.createElement(R,{type:"text",value:t.obs,name:"obs",onChange:e.handleChange,style:{width:"500px"},autoSize:{minRows:3,maxRows:7}}))))))))))},e.state={isNew:!0,loader:!0,categ:{status:!1,camisa:"",haste:""},canNew:!0,canSave:!0,canDelete:!1,loading:!1},e.handleChange=e.handleChange.bind(Object(r.a)(Object(r.a)(e))),e.setStateNew=e.setStateNew.bind(Object(r.a)(Object(r.a)(e))),e.onHandleClickSave=e.onHandleClickSave.bind(Object(r.a)(Object(r.a)(e))),e.onHandleClickDelete=e.onHandleClickDelete.bind(Object(r.a)(Object(r.a)(e))),e.onHandleClickNew=e.onHandleClickNew.bind(Object(r.a)(Object(r.a)(e))),e.validator=new S.a({locale:"pt",messages:{default:":attribute n\xe3o pode estar vazio"}}),e.leftListChild=d.a.createRef(),console.log("Constructor ----"),e}return Object(s.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=this.state.categ;t[e.target.name]=e.target.value,this.setState(function(){return{categ:t}})}},{key:"render",value:function(){return d.a.createElement(p.a,{spinning:this.state.loading,tip:this.state.loadingTip},d.a.createElement(h.a,null,d.a.createElement(f.a,{lg:5,md:5,sm:24,xs:24},this.LeftList()),d.a.createElement(f.a,{lg:15,md:15,sm:24,xs:24},this.Content(this.state.categ)),d.a.createElement(f.a,{lg:4,md:4,sm:24,xs:24},d.a.createElement(H.a,{title:"Grupos",onHandleClickNew:this.onHandleClickNew,onHandleClickSave:this.onHandleClickSave,onHandleClickDelete:this.onHandleClickDelete,canNew:this.state.canNew,canSave:this.state.canSave,canDelete:this.state.canDelete}))))}}]),t}(l.Component);t.default=I}}]);
//# sourceMappingURL=17.ecbf7190.chunk.js.map