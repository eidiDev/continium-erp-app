(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1152:function(e,a,t){"use strict";var r=t(0),n=t.n(r),o=t(533),s=function(e){var a=e.title,t=e.children,r=e.styleName,s=e.cover,c=e.extra,i=e.actions;return n.a.createElement(o.a,{title:a,actions:i,cover:s,className:"gx-card-widget ".concat(r),extra:c},t)};a.a=s,s.defaultProps={styleName:""}},1154:function(e,a,t){"use strict";var r=t(13),n=t(14),o=t(16),s=t(15),c=t(17),i=t(0),l=t.n(i),d=t(1133),m=t(1152),u=(t(1155),function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(o.a)(this,Object(s.a)(a).call(this,e))).updateWindow=function(){console.log("nextorders"),t.setState({page:!t.state.page})},t.state={page:!1,itemProperties:{title:"",subtitle:""}},t}return Object(c.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState(function(a){return{itemProperties:e.props.itemProperties}}),setInterval(this.updateWindow.bind(this),6e3)}},{key:"render",value:function(){var e=this.state.itemProperties,a=e.title,t=e.subtitle,r=e.columns,n=this.props.data;return l.a.createElement(l.a.Fragment,null,(this.state.page,l.a.createElement(m.a,{styleName:"gx-order-history",title:l.a.createElement("h2",{style:{fontSize:"30px"},className:"h4 gx-text-capitalize gx-mb-0"},a),extra:l.a.createElement("p",{style:{fontSize:"23px"},className:"gx-text-primary gx-mb-0 gx-pointer"},t)},l.a.createElement("div",{className:"gx-table-responsive"},l.a.createElement(d.a,{className:"Spe",columns:r,dataSource:n,pagination:!1,bordered:!0,align:"center",size:"default"})))))}}]),a}(l.a.Component));a.a=u},1155:function(e,a,t){},1161:function(e,a,t){"use strict";t.r(a);var r=t(42),n=t.n(r),o=t(56),s=t(13),c=t(14),i=t(16),l=t(15),d=t(17),m=t(0),u=t.n(m),p=t(168),h=t(90),x=t(533),f=t(160),g=t(145),v=t(78),E=t(1154),b=t(1152),N=t(12),P=t.n(N),w=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).makeMathHours=function(e){""!==e&&g.a.get("dashboard/returnInitHour/".concat(e)).then(function(a){var r;r=a.data,console.log(e),t.setState({apt:r[0],colaborador:r[0].colaborador});var n=P()(t.props.dataInicio,"DD/MM/YY HH:mm:ss");t.timer(n)}).catch(function(e){})},t.timer=function(e){t.interval=setInterval(function(){var a=P()(P()().diff(e)).utc().format("HH:mm:ss");t.setState({tempoRodando:a})},1e3)},t.state={chartProperties:{idOrderProdMaquina:"",idOrderProd:"",title:"",pedidoFox:"",status:"",qtde:"",CRO:"",orderProd:"",progresso:"",operador:"",programador:"",op:"",bgColor:""},timer:{},timerColaborador:{},apt:{},colaborador:{}},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillMount",value:function(){this.makeMathHours(this.props.idOrderProd)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e,a=this.props,t=a.bgColor,r=a.title,n=0,o={},s=this.props.order.etapas.sort(function(e,a){return e.sequencia>a.sequencia?1:e.sequencia<a.sequencia?-1:0}),c=s[0].maquina,i=(s[s.length-1].maquina,s.find(function(e){return e.maquina===r}));return void 0!==i&&i.sequencia>1&&(o=s.find(function(e){if(e.sequencia===i.sequencia-1)return e})),r===c?n=this.props.order.qtde:this.props.order.apontamentos.forEach(function(e){void 0!==i&&i.sequencia>1&&Object.keys(o).length>0&&o.maquina===e.maquina&&(n+=e.qtdeApontada)}),e=this.props.apontamentos.filter(function(e){return e.maquina===r}).reduce(function(e,a){return e+a.qtdeApontada},0),u.a.createElement("div",{style:{display:!0===this.props.show?"":"none"}},u.a.createElement(b.a,{styleName:"gx-card-full gx-bg-".concat(t)},u.a.createElement("div",{className:"gx-actchart gx-px-3 gx-pt-3 "},u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mb-0 gx-fs-xxl gx-font-weight-medium gx-text-white"},r,u.a.createElement("span",{className:"gx-mb-0 gx-ml-2 gx-pt-xl-2 gx-fs-lg gx-chart-$"}," ",u.a.createElement("i",{className:"icon icon-menu-up gx-fs-sm"}))),u.a.createElement("i",{className:"icon icon- gx-fs-xl gx-ml-auto gx-text-primary gx-fs-xxxl"})),u.a.createElement("p",{className:"gx-mb-0 gx-fs-sm gx-text-white"})),u.a.createElement("div",{className:"ant-row-flex gx-justify-content-between gx-mb-3 gx-mb-sm-4 gx-dash-search "},u.a.createElement("div",{className:"gx-mx-sm-2"},u.a.createElement("div",{className:"gx-media gx-featured-item"},u.a.createElement("div",{className:"gx-media-body gx-featured-content"},u.a.createElement("div",{className:"gx-featured-content-left"},u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("h1",{className:"gx-text-white gx-mb-1"},"Status: ",this.props.status),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Cod Produto: ",this.props.cro))),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Cod Ordem: ",this.props.orderProd))),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Ped. Venda: ",this.props.pedidoFox))),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Qtde Prevista: ",n))),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Qtde Produzida: ",e))),"programar"===this.state.apt.tipo?u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Programador: ",this.state.colaborador.name," "))):u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Operador: ",this.state.colaborador.name," ")," ")),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Tempo rodando: ",this.state.tempoRodando&&""!==this.state.tempoRodando?this.state.tempoRodando:"00:00:00"," ")," ")),u.a.createElement("div",{className:"ant-row-flex"},u.a.createElement("h1",{className:"gx-mr-3 gx-mb-1"},u.a.createElement("span",{className:"gx-text-white"},"Data Inicio: ",this.props.dataInicio," ")," ")))))))))}}]),a}(u.a.Component),q=(u.a.createElement("span",{className:"gx-link",key:1},"Joy Parish"),u.a.createElement("span",{className:"gx-link",key:2},"You"),u.a.createElement("span",{className:"gx-link",key:3},"Joy Parish"),[{title:"Maq.",dataIndex:"maquina",render:function(e,a){return""!==a.maquina?a.maquina:a.montagem}},{title:"Codigo Produto",dataIndex:"orderProd.product.cod"},{title:"Quantidade",dataIndex:"orderProd.qtde"},{title:"Status",dataIndex:"statusEtapa",render:function(e){return u.a.createElement("span",{className:"gx-text-red"},e)}}]),O=t(242),k=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).updateWindow=function(){t.setState({page:!t.state.page})},t.getDashboards=function(){g.a.get("Dashboards",{}).then(function(e){var a;a=e.data,t.setState({listOfDashboards:a})}).catch(function(e){console.log(e)})},t.getMaquinasInOrderProd=function(){g.a.get("orderprodMaquina/?limit=999").then(function(e){var a;a=e.data;var r,n=O.filter(a,function(e){if(null!==e.orderProd)return"liberada"===e.orderProd.status||"execu\xe7\xe3o"===e.orderProd.status});r=n.filter(function(e){return"execu\xe7\xe3o"===e.orderProd.status&&"execu\xe7\xe3o"===e.statusEtapa}),t.setState({listofMaquinasOfOrderProd:n,machinesExecution:r,machinesFreedom:n.filter(function(e){return"liberada"===e.statusEtapa})}),t.forceUpdate()}).catch(function(e){console.log(e)})},t.onChange=function(e){var a=t.state.checkeds;e.target.checked?a.push(e.target.name):a=a.filter(function(a){return a!==e.target.name}),t.setState({checkeds:a});var r=[],n=t.state.listOfDashboards;a.forEach(function(e){var a=[];n.forEach(function(t){t.cod===e&&t.machines.forEach(function(e){a.push(e.cod)})}),a.forEach(function(e){r.find(function(a){return a===e})||r.push(e)})}),t.setState({showMaquinas:r})},t.onChangeDash=Object(o.a)(n.a.mark(function e(){var a,r,o,s,c,i,l,d,m,u,p,h,x,f,g,v,E,b,N,P,w,q,k,y,M;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=t.state,o=r.listOfDashboards,s=r.dashboard,c=r.listofMaquinasOfOrderProd,i=!0,l=!1,d=void 0,e.prev=5,m=o[Symbol.iterator]();case 7:if(i=(u=m.next()).done){e.next=56;break}if((p=u.value).cod!==s.name){e.next=53;break}h=!0,x=!1,f=void 0,e.prev=13,g=p.machines[Symbol.iterator]();case 15:if(h=(v=g.next()).done){e.next=39;break}for(E=v.value,b=!0,N=!1,P=void 0,e.prev=20,w=c[Symbol.iterator]();!(b=(q=w.next()).done);b=!0)k=q.value,E.cod!==k.maquina&&E.cod!==k.montagem||a.push(k);e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),N=!0,P=e.t0;case 28:e.prev=28,e.prev=29,b||null==w.return||w.return();case 31:if(e.prev=31,!N){e.next=34;break}throw P;case 34:return e.finish(31);case 35:return e.finish(28);case 36:h=!0,e.next=15;break;case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(13),x=!0,f=e.t1;case 45:e.prev=45,e.prev=46,h||null==g.return||g.return();case 48:if(e.prev=48,!x){e.next=51;break}throw f;case 51:return e.finish(48);case 52:return e.finish(45);case 53:i=!0,e.next=7;break;case 56:e.next=62;break;case 58:e.prev=58,e.t2=e.catch(5),l=!0,d=e.t2;case 62:e.prev=62,e.prev=63,i||null==m.return||m.return();case 65:if(e.prev=65,!l){e.next=68;break}throw d;case 68:return e.finish(65);case 69:return e.finish(62);case 70:return e.next=72,O.filter(a,function(e){return e.orderProd.status,"execu\xe7\xe3o"===e.orderProd.status&&"execu\xe7\xe3o"===e.statusEtapa});case 72:y=e.sent,M=O.filter(a,function(e){return"liberada"===e.statusEtapa}),t.setState({machinesExecution:y,machinesFreedom:M});case 75:case"end":return e.stop()}},e,null,[[5,58,62,70],[13,41,45,53],[20,24,28,36],[29,,31,35],[46,,48,52],[63,,65,69]])})),t.handleOk=function(e){t.setState({visible:!1})},t.state={page:!1,visible:!0,listOfDashboards:[],listofMaquinasOfOrderProd:[],dashboard:{name:"",check:!1},machinesExecution:[],machinesFreedom:[],checkeds:[],showMaquinas:[],timerOrders:null};var r=setInterval(function(){t.getMaquinasInOrderProd()},15e3);return t.setState({timerOrders:r}),t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentWillMount",value:function(){this.getDashboards(),this.getMaquinasInOrderProd()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.state,t=a.listOfDashboards,r=a.dashboard,n=a.listofMaquinasOfOrderProd,o=a.machinesFreedom,s=[];return o.forEach(function(a){e.state.showMaquinas.find(function(e){return e===a.maquina||e===a.montagem})&&s.push(a)}),u.a.createElement(u.a.Fragment,null,u.a.createElement(v.a,null,u.a.createElement(p.a,null,u.a.createElement(h.a,{span:24},u.a.createElement(x.a,{type:"inner",title:"Dashboards"},u.a.createElement(p.a,null,t.map(function(a){return u.a.createElement(h.a,{span:4},u.a.createElement("div",{className:"gx-form-row0"},u.a.createElement(f.a,{onChange:e.onChange,value:r.check,name:a.cod},a.cod)))}))))),u.a.createElement(p.a,null,u.a.createElement(h.a,{span:13},u.a.createElement(p.a,null,this.state.machinesExecution.map(function(a){var t=a.orderProd.apontamentos.find(function(e){return""===e.dataFim});if(void 0===t)return u.a.createElement("div",null);var r=0;return a.orderProd.apontamentos.forEach(function(e){e.maquina===a.maquina&&(r+=e.qtdeApontada)}),u.a.createElement("div",{style:{width:"50%",display:e.state.showMaquinas.find(function(e){return e===a.maquina||e===a.montagem})?"":"none"}},u.a.createElement(h.a,{span:24},u.a.createElement(w,{key:a.orderProd.id,idOrderProdMaquina:a.orderProd.id,apontamentos:a.orderProd.apontamentos,idOrderProd:a.orderProd.id,title:"".concat(""===a.maquina?a.montagem:a.maquina),status:"".concat("execu\xe7\xe3o"===a.orderProd.status?"Em Execu\xe7\xe3o":a.orderProd.status),orderProd:"".concat(a.orderProd.orderProduction),bgColor:"primary",order:a.orderProd,cro:"".concat(a.orderProd.product.cod),pedidoFox:"".concat(a.orderProd.orderFox),qtde:"".concat(r),programador:"".concat(a.programador),operador:"".concat(a.operador),apontamento:t,dataInicio:t.dataInicio,show:!!e.state.showMaquinas.find(function(e){return e===a.maquina||e===a.montagem})})))}))),u.a.createElement(h.a,{span:11},0===n.length?"":u.a.createElement(E.a,{data:s,itemProperties:{title:"Proximas ordens",data:s,columns:q}})))))}}]),a}(u.a.Component);a.default=k}}]);
//# sourceMappingURL=4.908eb63a.chunk.js.map