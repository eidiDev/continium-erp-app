(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1159:function(e,t,a){"use strict";a.r(t);var n=a(42),r=a.n(n),o=a(56),s=a(13),l=a(14),i=a(16),c=a(15),d=a(17),m=a(3),u=a(0),p=a.n(u),h=a(1139),g=a(522),f=a(168),O=a(90),y=a(533),E=a(55),k=a(1144),C=a(1143),b=a(334),w=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return p.a.createElement(f.a,null,p.a.createElement(O.a,{span:24},p.a.createElement(y.a,{type:"inner",title:"Importa\xe7\xe3o Ordens Fox"},p.a.createElement(k.a,{layout:"horizontal",size:"small"},p.a.createElement(f.a,null,p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Data inicial"},p.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange("dataInicio")})))),p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Data final"},p.a.createElement(C.a,{format:"DD-MM-YYYY",onChange:this.props.handleChange("dataFim")})))),p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Pedido Venda"},p.a.createElement(b.a,{type:"text",value:this.props.filtros.pedido,name:"pedido",onChange:this.props.handleChange("pedido"),onKeyDown:this.props.onKeyDown})))),p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Pedido Cliente"},p.a.createElement(b.a,{type:"text",value:this.props.filtros.pedidoCliente,name:"pedidoCliente",onChange:this.props.handleChange("pedidoCliente"),onKeyDown:this.props.onKeyDown})))),p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Codigo produto"},p.a.createElement(b.a,{type:"text",value:this.props.filtros.produto,name:"produto",onChange:this.props.handleChange("produto"),onKeyDown:this.props.onKeyDown})))),p.a.createElement(O.a,{lg:4,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"CFOP"},p.a.createElement(b.a,{type:"text",name:"cfop",value:this.props.filtros.cfop,onChange:this.props.handleChange("cfop"),onKeyDown:this.props.onKeyDown})))),p.a.createElement(O.a,{lg:6,md:6,sm:12,xs:24},p.a.createElement("div",{className:"gx-form-row0"},p.a.createElement(k.a.Item,{label:"Cliente"},p.a.createElement(b.a,{type:"text",value:this.props.filtros.empresa,name:"empresa",onChange:this.props.handleChange("empresa"),onKeyDown:this.props.onKeyDown})))))))))}}]),t}(u.Component),x=a(530),D=a(1133),v=a(12),I=a.n(v),S=[{title:"Pedido Venda",dataIndex:"N\xfamero",width:100,key:"N\xfamero",align:"center"},{title:"Pedido Cliente",dataIndex:"Pedido do Cliente",key:"Pedido do Cliente"},{title:"Emiss\xe3o",dataIndex:"Emiss\xe3o",key:"Emiss\xe3o",render:function(e){return I()(e).format("DD-MM-YYYY")}},{title:"Cliente",dataIndex:"Empresa",key:"Empresa"},{title:"Cnpj/Cpf",dataIndex:"cnpj_cpf",key:"cnpj_cpf"},{title:"Razao Social",dataIndex:"razao",key:"razao"},{title:"C\xf3digo Produto",dataIndex:"Produto",key:"Produto"},{title:"Descri\xe7\xe3o",dataIndex:"LINHA01",key:"LINHA01",render:function(e,t){return t.LINHA01+" "+t.LINHA02}},{title:"Quantidade",dataIndex:"qty",key:"qty",align:"center"},{title:"CFOP",dataIndex:"cfop",key:"cfop"},{title:"Produto",dataIndex:"isProdutoOk",key:"isProdutoOk",align:"center",render:function(e){return 0===e?p.a.createElement(x.a,{color:"gold"},"Pendente"):p.a.createElement(x.a,{color:"green"},"Ok")}},{title:"Arvore Kit",dataIndex:"isKitOk",key:"isKitOk",align:"center",render:function(e){return 1===e?p.a.createElement(x.a,{color:"green"},"Ok"):p.a.createElement(x.a,{color:"gold"},"Pendente")}},{title:"Cliente",dataIndex:"isClienteOk",key:"isClienteOk",align:"center",render:function(e,t){return 0===e?p.a.createElement(x.a,{color:"gold"},"Pendente"):p.a.createElement(x.a,{color:"green"},"Ok")}},{title:"Etapa",dataIndex:"isEtapaOk",key:"isEtapaOk",align:"center",render:function(e,t){return 0===e?p.a.createElement(x.a,{color:"red"},"Sem Etapa"):p.a.createElement(x.a,{color:"green"},"Ok")}},{title:"Dados basicos",dataIndex:"isDadosBaseOk",key:"isDadosBaseOk",align:"center",width:150,render:function(e,t){return 0===e?p.a.createElement(x.a,{color:"red"},"Falta gerar ",p.a.createElement("br",null),"dados b\xe1sicos"):p.a.createElement(x.a,{color:"green"},"Ok")}},{title:"OP Gerada",dataIndex:"isOrdemOk",key:"isOrdemOk",align:"center",render:function(e,t){return 0===e?p.a.createElement(x.a,{color:"red"},"Sem Ordem"):p.a.createElement(x.a,{color:"green"},"Ok")}}],j=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).call(this))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return p.a.createElement(g.a,{spinning:!1},p.a.createElement(y.a,{type:"inner",title:"Ordens Filtras a gerar"},p.a.createElement(D.a,{scroll:{x:1500,y:300},rowSelection:{selectedRowKeys:this.props.selectedRowKeys,onChange:this.props.onSelectChange},columns:S,onChange:this.props.onChangePage,sorter:!0,bordered:!0,size:"small",dataSource:this.props.resultData,style:{margin:"-15px -24px"},loading:this.props.loading,rowKey:Math.random(1,100)})))}}]),t}(u.Component),P=a(9),L=a(1146),K=a(1148),N=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return p.a.createElement(L.a,{title:"Logs",visible:this.props.showLog,onOk:this.props.onOkLog,onCancel:this.props.onOkLog,bodyStyle:{padding:0},footer:[p.a.createElement(E.a,{key:"submit",type:"primary",onClick:this.props.onOkLog},"Ok")]},p.a.createElement(y.a,{title:"",className:"gx-card"},p.a.createElement(K.a,null,this.props.logs.map(function(e){var t=e.toString();return p.a.createElement(K.a.Item,{color:t.includes("n\xe3o tem")?"red":"green"},e)}))))}}]),t}(p.a.Component);P.a.defaults.timeout=6e7;var Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(c.a)(t).call(this))).handleChange=function(t){return function(a){var n=e.state.filtros;"object"===typeof a?"dataInicio"===t||"dataFim"===t?a&&(n[t]=a.format("YYYY-MM-DD")):n[t]=a.target.value:n[t]=a,e.setState({filtros:n})}},e.onChangePage=function(e,t){},e.onHandleClickSearch=function(){e.setState({resultsLoading:!0});var t=Object(m.a)(Object(m.a)(e));e.setState({resultData:[],selectedRowKeys:[]}),P.a.get("Fox/",{params:e.state.filtros}).then(function(e){t.setState({resultData:e.data}),h.a.success("Registros carregados.")}).catch(function(e){h.a.error("Erro ao buscar registro, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(){t.setState({resultsLoading:!1})})},e.onSelectChange=function(t,a){e.setState({selectedRowKeys:t,selectedRows:a}),e.checkIfAllstatusIsOk(a)},e.onKeyDown=function(t){"Enter"===t.key&&e.onHandleClickSearch()},e.onCreateBasicData=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(m.a)(Object(m.a)(e)),"POST",t.next=6,Object(P.a)({method:"POST",url:"Fox/createBasicData",data:{rows:a}}).then(function(e){n.setState({resultData:[],showLog:!0,logs:e.data,resultsLoading:!1}),h.a.success("Registros Criados Ou Alterados.")}).catch(function(e){h.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 6:case"end":return t.stop()}},t)})),e.onCreateOrders=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("onCreateOrders...."),e.setState({resultsLoading:!0}),a=e.state.selectedRows,n=Object(m.a)(Object(m.a)(e)),"POST",t.next=7,Object(P.a)({method:"POST",url:"Fox/createOrders",data:{rows:a}}).then(function(e){n.setState({resultData:[],showLog:!0,logs:void 0!==e.data?e.data:[],array:[]}),e.data.find(function(e){return e.includes("n\xe3o tem")})?h.a.error("Kits filhos nao tem Etapas !"):h.a.success("Ordens criadas !")}).catch(function(e){h.a.error("Erro interno, tente novamente mais tarde!:"+e.message),console.log("error",e)}).then(function(e){n.setState({resultsLoading:!1})});case 7:case"end":return t.stop()}},t)})),e.onOkLog=function(){e.setState({showLog:!1})},e.checkIfAllstatusIsOk=function(t){var a=t;if(0===a.length)e.setState({array:[]});else{var n=[],r=!0,o=!1,s=void 0;try{for(var l,i=a[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var c=l.value;1===c.isProdutoOk&&1===c.isKitOk&&1===c.isClienteOk&&1===c.isEtapaOk&&0===c.isOrdemOk&&1===c.isDadosBaseOk&&(n.push(c),e.setState({array:n}))}}catch(d){o=!0,s=d}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}n.length===a.length||e.setState({array:[]})}},e.state={loading:!1,loadingTip:"",canGenerate:!1,resultsLoading:!1,showLog:!1,resultData:[],array:[],array2:[],selectedRowKeys:[],selectedRows:[],filtros:{pedido:"",pedidoCliente:"",cfop:"",produto:"",empresa:"",dataInicio:"",dataFim:"",dataInicioM:"",dataFimM:""},logs:[]},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return p.a.createElement(g.a,{spinning:this.state.loading,tip:this.state.loadingTip},p.a.createElement(N,{showLog:this.state.showLog,onOkLog:this.onOkLog,logs:this.state.logs}),p.a.createElement(f.a,null,p.a.createElement(O.a,{lg:20,md:20,sm:24,xs:24},p.a.createElement(w,{handleChange:this.handleChange,filtros:this.state.filtros,onKeyDown:this.onKeyDown}),p.a.createElement(j,{resultData:this.state.resultData,loading:this.state.resultsLoading,selectedRowKeys:this.state.selectedRowKeys,onSelectChange:this.onSelectChange,onChangePage:this.onChangePage})),p.a.createElement(O.a,{lg:4,md:4,sm:24,xs:24},p.a.createElement(y.a,{type:"inner",title:"A\xe7oes"},p.a.createElement(E.a,{block:!0,type:"primary",onClick:this.onHandleClickSearch},"Pesquisar"),p.a.createElement(E.a,{block:!0,type:"primary",className:"gx-btn-secondary",disabled:!this.state.selectedRows.length>0,onClick:this.onCreateBasicData},"Gerar Dados B\xe1sicos"),p.a.createElement(E.a,{block:!0,type:"primary",className:"gx-btn-red",disabled:0===this.state.array.length,onClick:this.onCreateOrders},"Gerar OP")))))}}]),t}(u.Component);t.default=Y}}]);
//# sourceMappingURL=10.0dab6112.chunk.js.map